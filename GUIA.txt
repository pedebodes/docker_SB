Depois de instalar o Linux Mint normalmente, siga os seguintes passos para terminar a configuração geral.

NOTAS GERAIS

Em todos os lugares onde aparecer <usuariolinux>, substitua pelo seu usuário no Linux (no meu caso, roberto) - e onde houver <grupolinux>, pelo grupo do seu usuário, que normalmente é igual ao usuario.

Seu login e senha na rede Windows serão representadas por <usuariowindows> (no meu caso, roberto.amorim) e <senhawindows>, respectivamente.


Para montar a rede corporativa (primeiro passo, já que vários arquivos necessários para os próximos passos estão lá):

1. Crie um diretorio "redesuperbuy" no seu diretório home executando o comando abaixo:

mkdir /home/<usuariolinux>/redesuperbuy

2. Crie um arquivo com o conteúdo abaixo:

#!/bin/bash
sudo mount -t cifs //172.16.0.12/corporativo -o username=<usuariowindows>,password=<senhawindows>,uid=<usuariolinux>,gid=<grupolinux> /home/<usuariolinux>/redesuperbuy/

Eu chamei o arquivo de corporativo.sh, mas você pode chamar do que quiser. Lembre de substituir os campos com <> pelos valores apropriados, conforme especificado nas NOTAS GERAIS.

3. Dê as permissões adequadas para o arquivo:

chmod +x corporativo.sh

4. Execute o arquivo:

./corporativo.sh

Haverá um prompt pedindo a sua senha de usuário do Linux. Se tudo correr bem, o drive estará montado no diretório /home/<usuariolinux>/redesuperbuy.



Configurando o ambiente Python


1. Instale o pacote python-virtualenv usando o Software Manager ou o comando abaixo:

sudo apt-get python-virtualenv

2. Vá para o caminho Funcional/SetupLinux na rede corporativa e copie o arquivo FlaskEnv2.tgz usando o comando abaixo:

cp /home/<usuariolinux>/redesuperbuy/Funcional/SetupLinux/FlaskEnv2.tgz ~

3. Navegue para onde você quer colocar o ambiente e execute o comando abaixo:

tar -zxvf ~/FlaskEnv2.tgz

O comando vai criar um diretorio FlaskEnv2 no diretorio atual.

4. Use o comando abaixo para atualizar os paths do virtualenv apropriadamente:

python -m virtualenv FlaskEnv2

5. Se tudo correr bem, você poderá ativar o ambiente usando o seguinte comando (como exemplo, estou considerando que o caminho para o ambiente é /home/roberto/projetos/FlaskEnv2):

source /home/roberto/projetos/FlaskEnv2/bin/activate

Ao fazer isso, o prompt do terminal deve mudar, sendo precedido por (FlaskEnv2).

6. Agora pode navegar para o diretório raiz do sbflaskapps_layout e rodar o script runserver para rodar o Flask. Se bem que ele ainda não vai conseguir se conectar ao banco, porque falta o driver da Oracle, que é o próximo passo.






#############################################################################################
Configurando o driver da Oracle (no Linux)


1. No caminho Funcional/SetupLinux, busque o arquivo oraclelinux.tgz e (supondo que o arquivo esteja na raiz do seu diretório home) execute os seguintes comandos para descompactar:

cd /
sudo tar -zxvf ~/oraclelinux.tgz

2. Copie o arquivo x86_64-oracle.conf para o seu diretorio home e copie para o local correto usando o seguinte comando:

sudo cp ~/x86_64-oracle.conf /etc/ld.so.conf.d/

3. Reinicie o loader para confirmar a mudança de configuração acima:

sudo ldconfig

4. O Oracle deve estar funcional - daria pra testar, se não fosse pelo fato de que não temos VPNs pra QA e Prod configuradas. Vamos por partes então.

#############################################################################################
























Configurando a VPN p/ QA (Forticlient)


1. Pegue no Funcional/SetupLinux o arquivo forticlientsslvpn_linux_4.4.2330.tar.gz e copie para seu home. Ache o lugar que quiser para descompactar o arquivo, navegue até lá, e use o comando abaixo:

tar -zxvf forticlientsslvpn_linux_4.4.2330.tar.gz

2. Você deve ver um diretório forticlientsslvpn agora. Navegue pra lá e execute o comando abaixo:

sudo ./fortisslvpn.sh

3. Vai aparecer uma janelinha. Por enquanto não salve nada; apenas feche a janela pra sair do client. Vamos precisar consertar um furinho de segurança da Fortinet nesse client.

4. Use o comando abaixo para navegar para onde o problema está:

cd 64bit/helper/

5. Use os comandos abaixo para resolver o problema, substituindo <grupolinux> pelo valor apropriado na sua máquina:

sudo chmod 550 subproc
sudo chgrp <grupolinux> subproc
sudo chmod u+s subproc

6. Agora está tudo certo. Para se conectar, basta navegar para o diretório e usar o comando abaixo:

./fortisslvpn.sh

IMPORTANTE: não use sudo para rodar de novo, ou o fix acima pode ser desfeito e deixar sua máquina vulnerável a um ataque de elevação de privilégios.


OK então, com a VPN conectada, já dá pra rodar o projeto do sbflaskapps_layout (usando ./runserver) e tudo deve estar funcionando. Só falta botar o PLSQL Developer pra funcionar, mas não tem versão pra Linux. Hora de apelar...





























Configurando o PLSQL Developer para rodar no Linux


1. Vamos contar com a ajuda do WINE para emular um ambiente Windows no Linux. Pra isso, instale os pacotes do wine usando o Software Manager ou usando o comando abaixo:

sudo apt-get install wine wine-gecko2.21 wine-mono0.0.8

2. Rode o wine uma vez pra ele criar os diretórios apropriados e etc. Antes de instalarmos o PLSQL Developer, vamos configurar o Oracle nesse ambiente WINE/Windows. Comece mudando para o drive C (normalmente algo como ~/.wine/drive_c )

3. No diretório Funcional/SetupLinux da rede, copie o arquivo oracleWINE.tgz para seu home e use os seguintes comandos para descompactar corretamente:

cd .wine/drive_c
tar -zxvf ~/oracleWINE.tgz

4. Vamos precisar editar o registro do Windows (emulado). Pra isso use o comando

wine regedit

4.1. No caminho HKEY_LOCAL_MACHINE\Software adicione uma nova chave chamada Oracle.
4.2. No caminho HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\SessionManager\Environment :
	Adicione os valores a seguir no fim da variável PATH: c:\oracle;c:\oracle\bin
	Crie um novo valor tipo string com o nome TNS_ADMIN e sete o valor para c:\oracle\network\admin.
	Crie um novo valor tipo string com o nome NLS_LANG e sete o valor para BRAZILIAN PORTUGUESE_BRAZIL.WE8ISO8859P1 .

5. Pronto, driver Oracle configurado. Agora instale o PLSQL Developer rodando o instalador com o wine.

Bom, é isso. O que houver de dúvidas, é só falar comigo que eu ajudo, pra fazer essas configurações e outras.



Roberto <roberto.amorim@superbuy.com.br>


